<div class="container mt-5 container-nival">
    <div class="row mt-5">
        <div class="col-sm-6 col-md-6 col-lg-6 col-12 mt-4 pt-1 pbn-1">
            <h3 class="font-weight-normal">
                <i class="fa fa-files-o pr-1 pb-1 fa-nival fa-sm"></i>Reporte de Asistencia</h3>
        </div>
        <div class="col-sm-12 col-md-12 col-lg-12 col-12" style="margin: 0px !important; padding: 0px !important;">
            <hr class="hr-nival">
        </div>
        <div class="col-sm-6 col-md-6 col-lg-6 col-6 pt-1 pbn-1">
            <h3 class="font-weight-normal">
                <mat-checkbox [checked]="activar" (change)="presentarCalendario($event.checked)" class="fa-nival">
                </mat-checkbox> <i class="fa fa-filter pr-1 pb-1 fa-nival fa-sm" style="padding-left: 4px;"></i>
                Periodo de Asistencia:
            </h3>
        </div>
        <div class="col-sm-6 col-md-6 col-lg-6 col-6 pt-1 pbn-1">
            <a class="float-right" style="text-decoration: none;"
                [routerLink]="['/reporte-general', dataId, fecha_inicio, fecha_fin]">
                <i class="fa fa-folder-open pr-1 fa-nival"></i>Ver Reporte General
            </a>
        </div>
        <div class="col-sm-12 col-md-12 col-lg-12 col-12 pt-1 pbn-1" *ngIf="verCalendario">
            <form [formGroup]="anioForm">
                <div class="form-group text-center">
                    <div class="row">
                        <div class="col-sm-6 col-md-6 col-lg-6 col-6 pt-1 pbn-1">
                            <div class="form-group">
                                <mat-form-field class="fullNivalWidth">
                                    <mat-label>Inicio</mat-label>
                                    <input autocomplete="off" matInput [matDatepickerFilter]="myFilter"
                                        [matDatepicker]="picker" formControlName="inicio" readonly>
                                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                    <mat-datepicker #picker></mat-datepicker>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-6 col-lg-6 col-6 pt-1 pbn-1">
                            <div class="form-group">
                                <mat-form-field class="fullNivalWidth">
                                    <mat-label>Final</mat-label>
                                    <input autocomplete="off" matInput [matDatepickerFilter]="myFilter"
                                        [matDatepicker]="picker1" formControlName="fin" readonly
                                        (dateInput)="validarFecha($event, anioForm.value )">
                                    <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                    <mat-datepicker #picker1></mat-datepicker>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div class="form-group">
            <div class="col-sm-12 col-md-12 col-lg-12 mt-3 col-12 mb-1" *ngIf="!verCalendario"></div>
            <div class="row">
                <div class="col-sm-12 col-md-12 col-lg-12 col-12 mb-1">
                    <div class="example-container mat-elevation-z3">
                        <mat-form-field class="busqueda1">
                            <mat-label>Buscar</mat-label>
                            <input matInput autocomplete="off" (keyup)="applyFilter($event)"
                                placeholder="Ejemplo 201720 o Pepito Perez" #input>
                            <a class="aNival" mat-icon-button matSuffix (click)="limpiarBusqueda(input)">
                                <mat-icon matSuffix>close</mat-icon>
                            </a>
                        </mat-form-field>
                        <table mat-table [dataSource]="dataSource" #tabla1>

                            <!-- Numero de fila -->
                            <ng-container matColumnDef="fila">
                                <th mat-header-cell *matHeaderCellDef> N° </th>
                                <td mat-cell *matCellDef="let element ,let i = index;"> {{i+1}}
                                </td>
                            </ng-container>

                            <!-- Position Column -->
                            <ng-container matColumnDef="codigoUnico">
                                <th mat-header-cell *matHeaderCellDef> Codigo único </th>
                                <td mat-cell *matCellDef="let element"> {{element.codigoUnico}}
                                </td>
                            </ng-container>

                            <!-- image colunm -->
                            <ng-container matColumnDef="image" sticky>
                                <th mat-header-cell *matHeaderCellDef> Imagen </th>
                                <td class="px-1" mat-cell *matCellDef="let element, let i = index;">
                                    <a (click)='openPhoto(element.image)'>
                                        <img mat-card-image class="avatarNival" src={{element.image}} alt="noImage">
                                    </a>
                                </td>
                            </ng-container>
                            <!-- Name Column -->
                            <ng-container matColumnDef="nombre">
                                <th mat-header-cell *matHeaderCellDef> Nombre </th>
                                <td class="px-1" mat-cell *matCellDef="let element, let l = index;">

                                    <a class="text-left">
                                        <p class=" rounded p-1 mt-2">
                                            {{element.nombre}}
                                        </p>
                                    </a>
                                </td>
                            </ng-container>

                            <!-- Weight Column -->
                            <ng-container matColumnDef="reporte">
                                <th mat-header-cell *matHeaderCellDef> Generar Reporte </th>
                                <td class="px-1" mat-cell *matCellDef="let element, let p = index;">
                                    <a class="text-center"
                                        [routerLink]="['/reporte-individual', dataId, element.nombre, fecha_inicio, fecha_fin]">
                                        <i class="fa fa-file-text-o"></i>
                                    </a>
                                </td>
                            </ng-container>

                            <!-- Symbol Column -->
                            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                            <tr class="mat-row" *matNoDataRow>
                                <td class="mat-cell" colspan="5">No se ha encontrado: "{{input.value}}"</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>