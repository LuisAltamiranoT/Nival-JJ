<nav class="navbar navbar-light bg-light">
    <a class="navbar-brand mt-4"></a>
</nav>
<div class="container container-nival mt-2 pt-1" *ngIf="validate">
    <div class="row">
        <section class="example-spacer" style="width: 100%; margin-left: 30px;">
            <div class="example-button-row">
                <span class="with-icon">
                    <mat-icon>
                        format_list_bulleted
                    </mat-icon>
                    Asistencia {{NombreMateria}}
                </span>
                <button mat-button (click)="almacenarNominaFinalizado()" [disabled]='validateGuardarInformacion'>
                    <mat-icon>
                        save
                    </mat-icon>
                    Guardar Asistencia
                </button>
                <button mat-button  [disabled]='validateReporte' (click)="openVistaAnterior()">
                    <mat-icon>
                        find_in_page
                    </mat-icon>
                    {{seleccionBusqueda}}
                </button>

                <a mat-button (click)="replaceVistaTrue()" *ngIf="validateSeleccionHistorial">
                    <mat-icon>
                        update
                    </mat-icon>
                    Asistencia Actual
                </a>

                <a mat-button (click)="changeState()">
                    <mat-icon>
                        settings
                    </mat-icon>
                    Estado {{estado | titlecase}}
                </a>

                <button mat-button (click)='onReportes()' [disabled]='validateReporte'>
                    <mat-icon>
                        list_alt
                    </mat-icon>
                    Reportes
                </button>
                <a mat-button (click)="QR()" [routerLink]="['/codigo',codigoQr]" target="_blank">
                    <mat-icon>
                        qr_code_2
                    </mat-icon>
                    Generar QR
                </a>
            </div>
        </section>
        <div class="col-sm-12 col-md-12 col-lg-12 pt-1">
            <hr class="hr-nival" style="margin-bottom: 0px;">
        </div>
    </div>
</div>

<div class="container" *ngIf="validate else barra">
        <mat-form-field appearance="standard" class="busqueda1" style="padding-top: 0px !important;">
        <mat-label>Buscar</mat-label>
        <input matInput autocomplete="off" (keyup)="applyFilter($event)" placeholder="Ejemplo 201720 o Pepito Perez"
            #input>
        <a class="aNival" mat-icon-button matSuffix (click)="limpiarBusqueda(input)">
            <mat-icon matSuffix>backspace</mat-icon>
        </a>
        </mat-form-field>

        <div class="example-container mat-elevation-z2">
            <table mat-table [dataSource]="dataSource" #tabla1>

                <!-- Numero de fila -->
                <ng-container matColumnDef="fila">
                    <th mat-header-cell *matHeaderCellDef> N° </th>
                    <td mat-cell *matCellDef="let element ,let i = index;"> {{i+1}}
                    </td>
                </ng-container>

                <!-- Position Column -->
                <ng-container matColumnDef="codigoUnico">
                    <th mat-header-cell *matHeaderCellDef> Codigo único </th>
                    <td mat-cell *matCellDef="let element"> {{element.codigoUnico}}
                    </td>
                </ng-container>

                <!-- image colunm -->
                <ng-container matColumnDef="image">
                    <th mat-header-cell *matHeaderCellDef> Imagen </th>
                    <td class="px-1" mat-cell *matCellDef="let element, let i = index;">
                        <a (click)='openPhoto(element.image)'>
                            <div mat-card-image [style.background-image]="'url('+img+')'" class="avatarNival avatarDiv">
                                <div mat-card-image [style.background-image]="'url('+element.image+')'"
                                    class="avatarNival avatarDiv">
                                </div>
                            </div>
                        </a>
                    </td>
                </ng-container>


                <!-- Name Column -->
                <ng-container matColumnDef="nombre" sticky>
                    <th mat-header-cell *matHeaderCellDef> Nombre </th>
                    <td class="px-1" mat-cell *matCellDef="let element, let l = index;">

                        <a class="text-left">
                            <p class=" rounded p-1 mt-2">
                                {{element.nombre}}
                            </p>
                        </a>
                    </td>
                </ng-container>

                <!-- Weight Column -->
                <ng-container matColumnDef="presente">
                    <th mat-header-cell *matHeaderCellDef> Presente </th>
                    <td class="px-1" mat-cell *matCellDef="let element, let p = index;">
                        <mat-checkbox [checked]=element.presente [disabled]=element.presente
                            (change)="showOptionsPresente($event, p,element.correo)"></mat-checkbox>
                    </td>
                </ng-container>

                <!-- Symbol Column -->
                <ng-container matColumnDef="atraso">
                    <th mat-header-cell *matHeaderCellDef> Atraso </th>
                    <td class="px-1" mat-cell *matCellDef="let element, let a = index;">
                        <mat-checkbox [checked]=element.atraso [disabled]=element.atraso
                            (change)="showOptionsAtraso($event, a,element.correo)"></mat-checkbox>
                    </td>
                </ng-container>
                <ng-container matColumnDef="falta">
                    <th mat-header-cell *matHeaderCellDef> Falta </th>
                    <td class="px-1" mat-cell *matCellDef="let element, let f = index;">
                        <mat-checkbox [checked]=element.falta [disabled]=element.falta
                            (change)="showOptionsFalta($event, f,element.correo)"></mat-checkbox>
                    </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                <tr class="mat-row" *matNoDataRow>
                <td class="mat-cell" colspan="5">No se ha encontrado: "{{input.value}}"</td>
            </tr>
            </table>
        </div>
</div>

<ng-template #barra>
    <div class="spinnerA">
        <span class="spinnerB">
            <mat-spinner [strokeWidth]='5'></mat-spinner>
        </span>
    </div>

</ng-template>